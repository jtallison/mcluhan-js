<html>
<head>
	<script src="palette.js"></script>
	<script src="../example/js/jquery.js"></script>
</head>
<body>

	<style>

		body {
			margin:0px;
			padding:0px;
			font-family:courier;
		}

		.column {
			width:200px;
			float:left;
			border-right:solid 1px #eee;
			height:600px;
			font-size:10pt;
		}

		a {
			cursor:pointer;
			text-decoration:none;
			color:inherit;
		}

		a:hover {
			font-weight:bold;
		}

		#tutspace {
			background-color:#fff;
			width:100%;
			position:fixed;
			right:0px;
			bottom:0px;
			border:solid 2px #eee;
			padding:25px 25px 50px;
			box-sizing:border-box;
		}

	</style>

	<div class="column" id="col1">
		<div style="color:#000;padding:10px;border-top:solid 1px #000;border-bottom:0px;line-height:1.5em;">
			<b><a href="http://github.com/taylorbf/mcluhan-js" style="text-decoration:underline">McLuhan.js</a> Cheatsheet</b>
		</div>

	</div>
	<div class="column" id="col2"></div>
	<div class="column" id="col3"></div>
	<div class="column" id="col4"></div>
	<div class="column" id="col5"></div>
	<div class="column" id="col6"></div>
	<div class="column" id="col7"></div>

	<div id="tutspace"></div>
	<script>

		var core;

		$.ajax({
		  dataType: "json",
		  url: "all.json",
		  //data: data,
		  success: function(data) {
		  	core = data;
		  	setup();
		  }
		});

		var html = ""
		var lines = 0;
		var tutspace = document.getElementById("tutspace")

	  var seq;
	  var mediumclass = {
	  	funcs: [],
	  	props: []
	  }


		function setup() {
			seq = palette('tol-rainbow', core.classes.length);
			//seq = palette('cb-Set1', 9);


			for (var i=0;i<core.classes.length;i++) {
				lines+=4;
				html = ""
			  html += '<div style="color:#'+seq[i]+';padding:10px;border-top:solid 1px #'+seq[i]+';border-bottom:0px;line-height:1.5em;">'

				var thisclass = core.classes[i]
			  html += "<b>"+ thisclass.name + "</b><br>"

			  if (thisclass.functions) {
					for (var j=0;j<thisclass.functions.length;j++) {
						if (mediumclass.funcs.indexOf(thisclass.functions[j].name)==-1) {
							lines++;
							var thisfunction = thisclass.functions[j]
					  	html += "<a href='javascript:funkytut("+i+","+j+")'>"+thisfunction.name + "("

					  	html += '<span style="font-size:8pt">'
					  	for (var k=0;k<thisfunction.parameters.length;k++) {
					  		if (k>=1) {
					  			html += ", "
					  		}
					  		html += thisfunction.parameters[k].name

					  	}
					  	html += '</span>'


					  	html +=	")<br>"

							if (thisclass.name == "Medium") {
								mediumclass.funcs.push(thisfunction.name)
							}
						}

					}
				}
			  if (thisclass.properties) {
					for (var j=0;j<thisclass.properties.length;j++) {
						console.log(thisclass.properties[j])
						if (mediumclass.props.indexOf(thisclass.properties[j].name)==-1) {
							lines++;
							var thisprop = thisclass.properties[j]
					  	html += thisprop.name + "<br>"

							if (thisclass.name == "Medium") {
								mediumclass.funcs.push(thisfunction.name)
							}
						}
					}
				}

				html += "</div>"
				var thiscol = Math.floor(lines/35)+1
				console.log(thisclass.name,lines,thiscol)
				document.getElementById("col"+thiscol).innerHTML += html
			}

			// global functions
			
			lines+=4;
			html = ""
		  html += '<div style="color:#'+seq[i]+';padding:10px;border-top:solid 1px #'+seq[i]+';border-bottom:0px;line-height:1.5em;">'
		  html += "<b>Global</b><br>"

			for (var i=0;i<core.functions.length;i++) {
				
				var thisfunction = core.functions[i]
				console.log(thisfunction.name)
				
				lines++;
		  	html += "<a href='javascript:funkytut("+i+")'>"+thisfunction.name + "("

		  	html += '<span style="font-size:8pt">'
		  	for (var k=0;k<thisfunction.parameters.length;k++) {
		  		if (k>=1) {
		  			html += ", "
		  		}
		  		html += thisfunction.parameters[k].name

		  	}
		  	html += '</span>'


		  	html +=	")<br>"

			}


			html += "</div>"
			var thiscol = Math.floor(lines/35)+1
			document.getElementById("col"+thiscol).innerHTML += html
		
		}
			




		var funkytut = function(classi,funci) {
				tutspace.style.color = '#'+seq[classi]
				var tutstr = "<div style='border-bottom:solid 1px #"+seq[classi]+";padding-bottom:5px;margin-bottom:5px'>"+core.classes[classi].name + "."+core.classes[classi].functions[funci].name+"("

			  tutstr += '<span style="font-size:8pt">'
		  	for (var k=0;k<core.classes[classi].functions[funci].parameters.length;k++) {
		  		if (k>=1) {
		  			tutstr += ", "
		  		}
		  		tutstr += core.classes[classi].functions[funci].parameters[k].name

		  	}
		  	tutstr += '</span>'


				tutstr +=	")</div>"

				tutstr += core.classes[classi].functions[funci].description


				tutstr +=	"<br><br>"

				for (var k=0;k<core.classes[classi].functions[funci].parameters.length;k++) {
		  		var thisparam = core.classes[classi].functions[funci].parameters[k]
		  		tutstr += "<b>"+thisparam.name+":</b>"
		  		tutstr += "&nbsp;&nbsp;&nbsp;"+thisparam.type
		  		tutstr += "&nbsp;&nbsp;&nbsp;"+thisparam.description
		  		tutstr += "<br>"

		  	}

				tutspace.innerHTML = tutstr;
		}
	</script>
</body>
</html>